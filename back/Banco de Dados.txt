CREATE DATABASE IF NOT EXISTS JornalMoney;

/*Estabelecendo nome do usuário local e senha de acesso!*/
ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'Johnata123!';

/*Garantindo os privilégios de edições ao usuário*/
GRANT ALL PRIVILEGES ON teste.* TO 'root'@'localhost';

/*Atualizando privilégios*/
FLUSH PRIVILEGES;

USE JornalMoney;

CREATE TABLE IF NOT EXISTS categorias(
	 id INT AUTO_INCREMENT PRIMARY KEY,
	 nome VARCHAR(100) UNIQUE NOT NULL
 );

CREATE TABLE IF NOT EXISTS materia(
	id INT AUTO_INCREMENT PRIMARY KEY,
    titulo VARCHAR(255) NOT NULL,
    subtitulo VARCHAR(255) NOT NULL,
    conteudo TEXT NOT NULL,
    imagem_url VARCHAR(500) NOT NULL,
    categoria_id INT NOT NULL,
    data_publicacao TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (categoria_id) REFERENCES categorias(id) ON DELETE CASCADE
);

SELECT * FROM materia;
SELECT * FROM materia WHERE categoria_id = 1 ORDER BY data_publicacao DESC LIMIT 4;

SELECT * FROM materia WHERE categoria_id = 2 ORDER BY data_publicacao DESC LIMIT 4;
INSERT INTO categorias (nome) VALUES ('Economia'), ('Política'), ('Curiosidades'), ('Previsões');